# P6Spy
# implementation 'com.github.gavlyukovskiy:p6spy-spring-boot-starter:1.9.0'
# https://velog.io/@cvcvcx9/p6spy%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%BF%BC%EB%A6%AC-%EB%A7%A4%EA%B0%9C%EB%B3%80%EC%88%98-%EB%A1%9C%EA%B7%B8

spring:
  datasource:
    p6spy:
      enabled: false
    url: jdbc:h2:tcp://localhost/~/test
    username: sa
    driver-class-name: org.h2.Driver
  jpa:
    hibernate:
      naming:
#        physical-strategy: org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
        physical-strategy: hellojpa.config.UpperCaseNamingStrategy
      ddl-auto: create # none update create create-drop validate
    properties:
      hibernate:
        format_sql: true
        use_sql_comments: true
        highlight_sql: true
        generate_statistics: true
        dialect: org.hibernate.dialect.H2Dialect
#        dialect: org.hibernate.dialect.OracleDialect
#        dialect: org.hibernate.dialect.MySQL57Dialect
#        dialect: org.hibernate.dialect.PostgreSQLDialect
#        dialect: org.hibernate.dialect.SQLServer2012Dialect


# =========================
# ðŸ“‹ MyBatis ì„¤ì •
# =========================
mybatis:
  type-aliases-package: hello.itemservice.domain   # MyBatis XMLì—ì„œ ì‚¬ìš©í•  íƒ€ìž… ë³„ì¹­ íŒ¨í‚¤ì§€ì˜ ê¸°ë³¸ ê²½ë¡œë¥¼ ì„¤ì •í•´ì£¼ì–´ Classëª…ë§Œ ì§€ì •í•´ì£¼ë©´ ë¨
  configuration:
    map-underscore-to-camel-case: true             # DBì˜ ì–¸ë”ìŠ¤ì½”ì–´(_)ë¥¼ ì¹´ë©œ ì¼€ì´ìŠ¤ë¡œ ìžë™ ë§¤í•‘


# =========================
# ðŸ” ë¡œê¹… ì„¤ì • (SQL ë° íŠ¸ëžœìž­ì…˜ ì¶”ì )
# =========================
logging:
  level:
    # â–¶ï¸ Spring JDBC ë° íŠ¸ëžœìž­ì…˜ ë¡œê¹…
    org.springframework.jdbc: DEBUG                                         # JDBC ê´€ë ¨ ë””ë²„ê¹… ì •ë³´ ì¶œë ¥ ex) DEBUG: Executing SQL statement [SELECT * FROM users WHERE id=?]
    org.springframework.jdbc.datasource.DataSourceTransactionManager: DEBUG # ë°ì´í„°ì†ŒìŠ¤ íŠ¸ëžœìž­ì…˜ ê´€ë¦¬ìž ë¡œê¹… ex) DEBUG: Began JDBC transaction on Connection [conn1]
    org.springframework.test.context.transaction: TRACE                     # í…ŒìŠ¤íŠ¸ í™˜ê²½ì˜ íŠ¸ëžœìž­ì…˜ ë™ìž‘ ì¶”ì  ex) TRACE: Began transaction (transaction manager [JpaTransactionManager])
    org.springframework.transaction.interceptor: TRACE                      # íŠ¸ëžœìž­ì…˜ ì¸í„°ì…‰í„°ì˜ ìƒì„¸ ë™ìž‘ ë¡œê¹… ex) TRACE: Getting transaction for [com.example.service.MyService.saveData]
    org.springframework.orm.jpa.JpaTransactionManager: DEBUG                # JPA íŠ¸ëžœìž­ì…˜ ê´€ë¦¬ìž ë¡œê¹… ex) DEBUG: Committing JPA transaction on EntityManager [em1]

    # â–¶ï¸ MyBatis Repository ë¡œê¹…
    hello.itemservice.repository.mybatis: TRACE                   # MyBatis Repositoryì˜ SQL ì‹¤í–‰ ë° ì²˜ë¦¬ ê³¼ì • ë¡œê¹… ex) TRACE: Querying MyBatis mapper for method [selectUserById]

    # â–¶ï¸ Hibernate SQL ë° íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ì¶”ì  (P6Spyë¡œ ëŒ€ì²´ê°€ëŠ¥ ê°œë°œí™˜ê²½ì—ì„œë§Œ)
    org.hibernate.SQL: DEBUG                                      # SQL ì¿¼ë¦¬ì¶œë ¥ ex) DEBUG: select * from users where id=?
    org.hibernate.orm.jdbc.bind: TRACE                            # (ìŠ¤í”„ë§ë¶€íŠ¸ 3.xë²„ì „)SQL íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ì¶”ì (JPAê°€ ìµœì¢…JDBC ë‹¨ê³„ë¡œ ì§„ìž…í•œ ìƒíƒœì—ì„œ) ex) TRACE [org.hibernate.orm.jdbc.bind] - binding parameter [1] = 'apple' (VARCHAR)
#    org.hibernate.orm.jdbc.extract: TRACE                         # JDBC ê²°ê³¼ ì¶”ì¶œ ë¡œê¹… (ë™ìž‘ì•ˆí•˜ëŠ”ë° ã… ã… )
    org.hibernate.resource.transaction: DEBUG                     # Hibernateì˜ íŠ¸ëžœìž­ì…˜ ë¦¬ì†ŒìŠ¤ ê´€ë¦¬ ì¶”ì  ex) DEBUG: Initiating transaction after acquiring JDBC connection
    org.hibernate.type: TRACE
#    org.hibernate.type.descriptor.sql: TRACE                      # (ìŠ¤í”„ë§ë¶€íŠ¸ 2.xë²„ì „)SQL íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ê³¼ì • ìƒì„¸ ë¡œê¹… (ì „ë°˜ì ì¸ ë¡œê¹…)             ex) TRACE [org.hibernate.type.descriptor.sql] - Binding parameter [1] as [VARCHAR] - [apple]
#    org.hibernate.type.descriptor.sql.BasicBinder: TRACE          # (ìŠ¤í”„ë§ë¶€íŠ¸ 2.xë²„ì „)SQL íŒŒë¼ë¯¸í„° êµ¬ì²´ì ì¸ ê°’ê³¼ íƒ€ìž… ë¡œê¹… (êµ¬ì²´ì ì´ê³  í˜‘ì†Œí•œ ë¡œê¹…) ex) TRACE [org.hibernate.type.descriptor.sql.BasicBinder] - binding parameter [1] -> [apple] (VARCHAR)
